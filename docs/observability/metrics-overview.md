# Metrics Overview

**Document Status:** Draft  
**Version:** 1.0.0  
**Last Updated:** December 11, 2025

---

## Metric Categories

Clisonix Cloud collects metrics across 5 primary categories:

---

## 1. API Metrics

### HTTP Request Metrics

**`http_requests_total`**
- **Type:** Counter
- **Labels:** `method`, `endpoint`, `status_code`
- **Description:** Total HTTP requests processed

**`http_request_duration_seconds`**
- **Type:** Histogram
- **Labels:** `method`, `endpoint`
- **Buckets:** 0.005, 0.01, 0.025, 0.05, 0.1, 0.25, 0.5, 1.0, 2.5, 5.0, 10.0
- **Description:** Request latency distribution

**`http_response_size_bytes`**
- **Type:** Histogram
- **Labels:** `method`, `endpoint`
- **Description:** Response body size distribution

### API-Specific Metrics

**`alba_frames_generated_total`**
- **Type:** Counter
- **Description:** Total content frames generated by ALBA

**`albi_insights_computed_total`**
- **Type:** Counter
- **Description:** Analytics insights computed by ALBI

**`jona_audio_streams_active`**
- **Type:** Gauge
- **Description:** Active neural audio streams

---

## 2. System Metrics

### Process Metrics

**`process_cpu_seconds_total`**
- **Type:** Counter
- **Description:** Total CPU time consumed

**`process_resident_memory_bytes`**
- **Type:** Gauge
- **Description:** Current memory usage

**`process_open_fds`**
- **Type:** Gauge
- **Description:** Open file descriptors

### Runtime Metrics

**`python_gc_collections_total`**
- **Type:** Counter
- **Labels:** `generation`
- **Description:** Garbage collection runs

**`python_gc_objects_collected_total`**
- **Type:** Counter
- **Labels:** `generation`
- **Description:** Objects collected by GC

---

## 3. TSDB Metrics

### Storage Metrics

**`prometheus_tsdb_storage_blocks_bytes`**
- **Type:** Gauge
- **Description:** Total size of TSDB blocks

**`prometheus_tsdb_head_series`**
- **Type:** Gauge
- **Description:** Active time series in memory

**`prometheus_tsdb_head_chunks`**
- **Type:** Gauge
- **Description:** Total chunks in TSDB head

### Compaction Metrics

**`prometheus_tsdb_compactions_total`**
- **Type:** Counter
- **Description:** Completed compactions

**`prometheus_tsdb_compaction_duration_seconds`**
- **Type:** Histogram
- **Description:** Compaction operation latency

---

## 4. Network Metrics

**`net_conntrack_dialer_conn_failed_total`**
- **Type:** Counter
- **Labels:** `reason`
- **Description:** Failed connection attempts

**`http_req_duration_bucket`**
- **Type:** Histogram
- **Description:** HTTP client request latency

---

## 5. Clisonix Neural Metrics

### Brain Engine Metrics

**`neuro_eeg_packets_received_total`**
- **Type:** Counter
- **Description:** EEG data packets ingested

**`neuro_signal_processing_latency_seconds`**
- **Type:** Histogram
- **Description:** Neural signal processing time

**`neuro_harmonic_analysis_active`**
- **Type:** Gauge
- **Description:** Active harmonic analysis sessions

### Mesh Network Metrics

**`mesh_nodes_connected`**
- **Type:** Gauge
- **Description:** Connected mesh nodes

**`mesh_sync_latency_seconds`**
- **Type:** Histogram
- **Description:** Node synchronization latency

---

## Metric Naming Convention

Clisonix follows Prometheus naming best practices:

1. **Format:** `<namespace>_<subsystem>_<name>_<unit>`
2. **Examples:**
   - `clisonix_api_requests_total`
   - `clisonix_neuro_processing_duration_seconds`
   - `clisonix_alba_frames_bytes_total`

3. **Label Guidelines:**
   - Use lowercase with underscores
   - Avoid high-cardinality labels (user IDs, timestamps)
   - Keep label values finite and predictable

---

## Query Examples

### Average API Latency (last 5m)
```promql
rate(http_request_duration_seconds_sum[5m]) 
/ 
rate(http_request_duration_seconds_count[5m])
```

### Request Rate by Endpoint
```promql
sum by (endpoint) (rate(http_requests_total[1m]))
```

### TSDB Series Growth
```promql
delta(prometheus_tsdb_head_series[1h])
```

---

**Next:** [TSDB Analysis â†’](tsdb-analysis.md)
