# ============================================================
# CLISONIX CLOUD - 75 MICROSERVICES DOCKER COMPOSE
# Data: 30 Janar 2026
# Organizim: 12 Kategori x 75 Kontiniere
# ============================================================

version: "3.9"

networks:
  clisonix-network:
    driver: bridge
    name: clisonix-network

volumes:
  postgres-data:
  redis-data:
  neo4j-data:
  minio-data:
  victoria-data:
  ollama-data:

# ============================================================
# X-TEMPLATES - Reusable service configurations
# ============================================================
x-python-service: &python-service
  build:
    context: .
    dockerfile: Dockerfile.microservice
  networks:
    - clisonix-network
  restart: unless-stopped
  healthcheck:
    test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
    interval: 30s
    timeout: 10s
    retries: 3

services:
  # ==========================================================
  # CATEGORY 1: DATABASES (5 containers)
  # ==========================================================
  
  # Container 1: PostgreSQL
  postgres:
    image: postgres:15-alpine
    container_name: clisonix-postgres
    environment:
      POSTGRES_USER: clisonix
      POSTGRES_PASSWORD: clisonix123
      POSTGRES_DB: clisonix
    ports:
      - "5432:5432"
    volumes:
      - postgres-data:/var/lib/postgresql/data
    networks:
      - clisonix-network
    restart: unless-stopped

  # Container 2: Redis
  redis:
    image: redis:7-alpine
    container_name: clisonix-redis
    ports:
      - "6379:6379"
    volumes:
      - redis-data:/data
    networks:
      - clisonix-network
    restart: unless-stopped

  # Container 3: Neo4j
  neo4j:
    image: neo4j:5
    container_name: clisonix-neo4j
    environment:
      NEO4J_AUTH: neo4j/clisonix123
    ports:
      - "7474:7474"
      - "7687:7687"
    volumes:
      - neo4j-data:/data
    networks:
      - clisonix-network
    restart: unless-stopped

  # Container 4: VictoriaMetrics
  victoriametrics:
    image: victoriametrics/victoria-metrics:latest
    container_name: clisonix-victoria
    ports:
      - "8428:8428"
    volumes:
      - victoria-data:/victoria-metrics-data
    networks:
      - clisonix-network
    restart: unless-stopped

  # Container 5: MinIO
  minio:
    image: minio/minio:latest
    container_name: clisonix-minio
    environment:
      MINIO_ROOT_USER: clisonix
      MINIO_ROOT_PASSWORD: clisonix123
    command: server /data --console-address ":9001"
    ports:
      - "9000:9000"
      - "9001:9001"
    volumes:
      - minio-data:/data
    networks:
      - clisonix-network
    restart: unless-stopped

  # ==========================================================
  # CATEGORY 2: AI & OLLAMA (3 containers)
  # ==========================================================

  # Container 6: Ollama
  ollama:
    image: ollama/ollama:latest
    container_name: clisonix-ollama
    ports:
      - "11434:11434"
    volumes:
      - ollama-data:/root/.ollama
    networks:
      - clisonix-network
    restart: unless-stopped
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: all
              capabilities: [gpu]

  # Container 7: Ollama Multi API
  ollama-multi-api:
    <<: *python-service
    container_name: clisonix-ollama-multi-api
    ports:
      - "4444:4444"
    command: ["python", "ollama_multi_api.py"]
    working_dir: /app
    volumes:
      - ./ocean-core:/app
    depends_on:
      - ollama

  # Container 8: Ocean Core
  ocean-core:
    <<: *python-service
    container_name: clisonix-ocean-core
    ports:
      - "8030:8030"
    command: ["python", "ocean_core_api.py"]
    working_dir: /app
    volumes:
      - ./ocean-core:/app
    depends_on:
      - ollama-multi-api
      - redis

  # ==========================================================
  # CATEGORY 3: ASI TRINITY (4 containers)
  # ==========================================================

  # Container 9: ALBA
  alba:
    <<: *python-service
    container_name: clisonix-alba
    ports:
      - "5555:5555"
    command: ["python", "stubs/asi_component_stub.py", "alba", "5555"]
    depends_on:
      - ocean-core

  # Container 10: ALBI
  albi:
    <<: *python-service
    container_name: clisonix-albi
    ports:
      - "6680:6680"
    command: ["python", "stubs/asi_component_stub.py", "albi", "6680"]
    depends_on:
      - ocean-core

  # Container 11: JONA
  jona:
    <<: *python-service
    container_name: clisonix-jona
    ports:
      - "7777:7777"
    command: ["python", "stubs/asi_component_stub.py", "jona", "7777"]
    depends_on:
      - ocean-core

  # Container 12: ASI Core
  asi:
    <<: *python-service
    container_name: clisonix-asi
    ports:
      - "9094:9094"
    command: ["python", "stubs/asi_component_stub.py", "asi", "9094"]
    depends_on:
      - alba
      - albi
      - jona

  # ==========================================================
  # CATEGORY 4: CORE ENGINES (7 containers)
  # ==========================================================

  # Container 13: Alphabet Layers
  alphabet-layers:
    <<: *python-service
    container_name: clisonix-alphabet-layers
    ports:
      - "8061:8061"
    command: ["python", "stubs/core_engine_stub.py", "alphabet-layers", "8061"]

  # Container 14: LIAM
  liam:
    <<: *python-service
    container_name: clisonix-liam
    ports:
      - "8062:8062"
    command: ["python", "stubs/core_engine_stub.py", "liam", "8062"]

  # Container 15: ALDA
  alda:
    <<: *python-service
    container_name: clisonix-alda
    ports:
      - "8063:8063"
    command: ["python", "stubs/core_engine_stub.py", "alda", "8063"]

  # Container 16: ALBA Idle
  alba-idle:
    <<: *python-service
    container_name: clisonix-alba-idle
    ports:
      - "8031:8031"
    command: ["python", "stubs/core_engine_stub.py", "alba-idle", "8031"]

  # Container 17: Blerina
  blerina:
    <<: *python-service
    container_name: clisonix-blerina
    ports:
      - "8035:8035"
    command: ["python", "stubs/core_engine_stub.py", "blerina", "8035"]

  # Container 18: Cycle Engine
  cycle-engine:
    <<: *python-service
    container_name: clisonix-cycle-engine
    ports:
      - "8070:8070"
    command: ["python", "stubs/cycle_engine_stub.py", "8070"]

  # Container 19: SaaS Orchestrator
  saas-orchestrator:
    <<: *python-service
    container_name: clisonix-saas-orchestrator
    ports:
      - "9999:9999"
    command: ["python", "stubs/saas_orchestrator_stub.py", "9999"]

  # ==========================================================
  # CATEGORY 5: PERSONAS (1 container)
  # ==========================================================

  # Container 20: Personas Service
  personas:
    <<: *python-service
    container_name: clisonix-personas
    ports:
      - "9200:9200"
    command: ["python", "stubs/personas_stub.py", "9200"]
    depends_on:
      - ocean-core

  # ==========================================================
  # CATEGORY 6: AGIEM & DATASOURCES (9 containers)
  # ==========================================================

  # Container 21: AGIEM
  agiem:
    <<: *python-service
    container_name: clisonix-agiem
    ports:
      - "9300:9300"
    command: ["python", "stubs/agiem_stub.py", "9300"]

  # Container 22: DataSource Europe
  datasource-europe:
    <<: *python-service
    container_name: clisonix-ds-europe
    ports:
      - "9301:9301"
    command: ["python", "stubs/datasource_stub.py", "9301", "europe"]

  # Container 23: DataSource Americas
  datasource-americas:
    <<: *python-service
    container_name: clisonix-ds-americas
    ports:
      - "9302:9302"
    command: ["python", "stubs/datasource_stub.py", "9302", "americas"]

  # Container 24: DataSource Asia
  datasource-asia:
    <<: *python-service
    container_name: clisonix-ds-asia
    ports:
      - "9303:9303"
    command: ["python", "stubs/datasource_stub.py", "9303", "asia"]

  # Container 25: DataSource India
  datasource-india:
    <<: *python-service
    container_name: clisonix-ds-india
    ports:
      - "9304:9304"
    command: ["python", "stubs/datasource_stub.py", "9304", "india"]

  # Container 26: DataSource Africa
  datasource-africa:
    <<: *python-service
    container_name: clisonix-ds-africa
    ports:
      - "9305:9305"
    command: ["python", "stubs/datasource_stub.py", "9305", "africa"]

  # Container 27: DataSource Oceania
  datasource-oceania:
    <<: *python-service
    container_name: clisonix-ds-oceania
    ports:
      - "9306:9306"
    command: ["python", "stubs/datasource_stub.py", "9306", "oceania"]

  # Container 28: DataSource Central Asia
  datasource-central-asia:
    <<: *python-service
    container_name: clisonix-ds-central-asia
    ports:
      - "9307:9307"
    command: ["python", "stubs/datasource_stub.py", "9307", "central_asia"]

  # Container 29: DataSource Antarctica
  datasource-antarctica:
    <<: *python-service
    container_name: clisonix-ds-antarctica
    ports:
      - "9308:9308"
    command: ["python", "stubs/datasource_stub.py", "9308", "antarctica"]

  # ==========================================================
  # CATEGORY 7: LABORATORIES (23 containers)
  # ==========================================================

  # Container 30: Lab Elbasan (AI)
  lab-elbasan:
    <<: *python-service
    container_name: clisonix-lab-elbasan
    ports:
      - "9101:9101"
    command: ["python", "stubs/lab_stub.py", "9101", "Elbasan", "AI", "Albania"]

  # Container 31: Lab Tirana (Medical)
  lab-tirana:
    <<: *python-service
    container_name: clisonix-lab-tirana
    ports:
      - "9102:9102"
    command: ["python", "stubs/lab_stub.py", "9102", "Tirana", "Medical", "Albania"]

  # Container 32: Lab Durres (IoT)
  lab-durres:
    <<: *python-service
    container_name: clisonix-lab-durres
    ports:
      - "9103:9103"
    command: ["python", "stubs/lab_stub.py", "9103", "Durres", "IoT", "Albania"]

  # Container 33: Lab Vlore (Marine)
  lab-vlore:
    <<: *python-service
    container_name: clisonix-lab-vlore
    ports:
      - "9104:9104"
    command: ["python", "stubs/lab_stub.py", "9104", "Vlore", "Marine", "Albania"]

  # Container 34: Lab Shkoder (Environment)
  lab-shkoder:
    <<: *python-service
    container_name: clisonix-lab-shkoder
    ports:
      - "9105:9105"
    command: ["python", "stubs/lab_stub.py", "9105", "Shkoder", "Environment", "Albania"]

  # Container 35: Lab Korce (Agriculture)
  lab-korce:
    <<: *python-service
    container_name: clisonix-lab-korce
    ports:
      - "9106:9106"
    command: ["python", "stubs/lab_stub.py", "9106", "Korce", "Agriculture", "Albania"]

  # Container 36: Lab Saranda (Underwater)
  lab-saranda:
    <<: *python-service
    container_name: clisonix-lab-saranda
    ports:
      - "9107:9107"
    command: ["python", "stubs/lab_stub.py", "9107", "Saranda", "Underwater", "Albania"]

  # Container 37: Lab Prishtina (Security)
  lab-prishtina:
    <<: *python-service
    container_name: clisonix-lab-prishtina
    ports:
      - "9108:9108"
    command: ["python", "stubs/lab_stub.py", "9108", "Prishtina", "Security", "Kosovo"]

  # Container 38: Lab Kostur (Classical)
  lab-kostur:
    <<: *python-service
    container_name: clisonix-lab-kostur
    ports:
      - "9109:9109"
    command: ["python", "stubs/lab_stub.py", "9109", "Kostur", "Classical", "Greece"]

  # Container 39: Lab Athens (Architecture)
  lab-athens:
    <<: *python-service
    container_name: clisonix-lab-athens
    ports:
      - "9110:9110"
    command: ["python", "stubs/lab_stub.py", "9110", "Athens", "Architecture", "Greece"]

  # Container 40: Lab Rome (Heritage)
  lab-rome:
    <<: *python-service
    container_name: clisonix-lab-rome
    ports:
      - "9111:9111"
    command: ["python", "stubs/lab_stub.py", "9111", "Rome", "Heritage", "Italy"]

  # Container 41: Lab Zurich (Finance)
  lab-zurich:
    <<: *python-service
    container_name: clisonix-lab-zurich
    ports:
      - "9112:9112"
    command: ["python", "stubs/lab_stub.py", "9112", "Zurich", "Finance", "Switzerland"]

  # Container 42: Lab Beograd (Industrial)
  lab-beograd:
    <<: *python-service
    container_name: clisonix-lab-beograd
    ports:
      - "9113:9113"
    command: ["python", "stubs/lab_stub.py", "9113", "Beograd", "Industrial", "Serbia"]

  # Container 43: Lab Sofia (Chemistry)
  lab-sofia:
    <<: *python-service
    container_name: clisonix-lab-sofia
    ports:
      - "9114:9114"
    command: ["python", "stubs/lab_stub.py", "9114", "Sofia", "Chemistry", "Bulgaria"]

  # Container 44: Lab Zagreb (Biotech)
  lab-zagreb:
    <<: *python-service
    container_name: clisonix-lab-zagreb
    ports:
      - "9115:9115"
    command: ["python", "stubs/lab_stub.py", "9115", "Zagreb", "Biotech", "Croatia"]

  # Container 45: Lab Ljubljana (Energy)
  lab-ljubljana:
    <<: *python-service
    container_name: clisonix-lab-ljubljana
    ports:
      - "9116:9116"
    command: ["python", "stubs/lab_stub.py", "9116", "Ljubljana", "Energy", "Slovenia"]

  # Container 46: Lab Vienna (Quantum)
  lab-vienna:
    <<: *python-service
    container_name: clisonix-lab-vienna
    ports:
      - "9117:9117"
    command: ["python", "stubs/lab_stub.py", "9117", "Vienna", "Quantum", "Austria"]

  # Container 47: Lab Prague (Neuroscience)
  lab-prague:
    <<: *python-service
    container_name: clisonix-lab-prague
    ports:
      - "9118:9118"
    command: ["python", "stubs/lab_stub.py", "9118", "Prague", "Neuroscience", "Czech"]

  # Container 48: Lab Budapest (Robotics)
  lab-budapest:
    <<: *python-service
    container_name: clisonix-lab-budapest
    ports:
      - "9119:9119"
    command: ["python", "stubs/lab_stub.py", "9119", "Budapest", "Robotics", "Hungary"]

  # Container 49: Lab Bucharest (BigData)
  lab-bucharest:
    <<: *python-service
    container_name: clisonix-lab-bucharest
    ports:
      - "9120:9120"
    command: ["python", "stubs/lab_stub.py", "9120", "Bucharest", "BigData", "Romania"]

  # Container 50: Lab Istanbul (Nanotech)
  lab-istanbul:
    <<: *python-service
    container_name: clisonix-lab-istanbul
    ports:
      - "9121:9121"
    command: ["python", "stubs/lab_stub.py", "9121", "Istanbul", "Nanotech", "Turkey"]

  # Container 51: Lab Cairo (Archeology)
  lab-cairo:
    <<: *python-service
    container_name: clisonix-lab-cairo
    ports:
      - "9122:9122"
    command: ["python", "stubs/lab_stub.py", "9122", "Cairo", "Archeology", "Egypt"]

  # Container 52: Lab Jerusalem (Trade)
  lab-jerusalem:
    <<: *python-service
    container_name: clisonix-lab-jerusalem
    ports:
      - "9123:9123"
    command: ["python", "stubs/lab_stub.py", "9123", "Jerusalem", "Trade", "Israel"]

  # ==========================================================
  # CATEGORY 8: SAAS & MARKETPLACE (3 containers)
  # ==========================================================

  # Container 53: SaaS API
  saas-api:
    <<: *python-service
    container_name: clisonix-saas-api
    ports:
      - "8040:8040"
    command: ["python", "stubs/saas_api_stub.py", "8040"]

  # Container 54: Marketplace
  marketplace:
    <<: *python-service
    container_name: clisonix-marketplace
    ports:
      - "8004:8004"
    command: ["python", "stubs/marketplace_stub.py", "8004"]

  # Container 55: Economy
  economy:
    <<: *python-service
    container_name: clisonix-economy
    ports:
      - "9093:9093"
    command: ["python", "stubs/economy_stub.py", "9093"]

  # ==========================================================
  # CATEGORY 9: SERVICES (8 containers)
  # ==========================================================

  # Container 56: Reporting
  reporting:
    <<: *python-service
    container_name: clisonix-reporting
    ports:
      - "8001:8001"
    command: ["python", "stubs/reporting_stub.py", "8001"]

  # Container 57: Excel
  excel:
    <<: *python-service
    container_name: clisonix-excel
    ports:
      - "8002:8002"
    command: ["python", "stubs/excel_stub.py", "8002"]

  # Container 58: Behavioral
  behavioral:
    <<: *python-service
    container_name: clisonix-behavioral
    ports:
      - "8003:8003"
    command: ["python", "stubs/behavioral_stub.py", "8003"]

  # Container 59: Analytics
  analytics:
    <<: *python-service
    container_name: clisonix-analytics
    ports:
      - "8005:8005"
    command: ["python", "stubs/analytics_stub.py", "8005"]

  # Container 60: NeuroSonix
  neurosonix:
    <<: *python-service
    container_name: clisonix-neurosonix
    ports:
      - "8006:8006"
    command: ["python", "stubs/neurosonix_stub.py", "8006"]

  # Container 61: Aviation
  aviation:
    <<: *python-service
    container_name: clisonix-aviation
    ports:
      - "8080:8080"
    command: ["python", "stubs/aviation_stub.py", "8080"]

  # Container 62: Multi-Tenant
  multi-tenant:
    <<: *python-service
    container_name: clisonix-multi-tenant
    ports:
      - "8007:8007"
    command: ["python", "stubs/multi_tenant_stub.py", "8007"]

  # Container 63: Quantum
  quantum:
    <<: *python-service
    container_name: clisonix-quantum
    ports:
      - "8008:8008"
    environment:
      QUANTUM_PORT: "8008"
    command: ["python", "stubs/quantum_stub.py", "8008"]

  # ==========================================================
  # CATEGORY 10: FRONTEND & GATEWAY (3 containers)
  # ==========================================================

  # Container 64: API Gateway
  api:
    <<: *python-service
    container_name: clisonix-api
    ports:
      - "8000:8000"
    command: ["python", "stubs/service_stub.py", "api-gateway", "8000"]
    depends_on:
      - ocean-core
      - redis

  # Container 65: Web Frontend
  web:
    image: nginx:alpine
    container_name: clisonix-web
    ports:
      - "3000:80"
    networks:
      - clisonix-network
    restart: unless-stopped

  # Container 66: Traefik
  traefik:
    image: traefik:v2.10
    container_name: clisonix-traefik
    command:
      - "--api.insecure=true"
      - "--providers.docker=true"
      - "--entrypoints.web.address=:80"
    ports:
      - "80:80"
      - "8081:8080"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    networks:
      - clisonix-network
    restart: unless-stopped

  # ==========================================================
  # CATEGORY 11: MONITORING (5 containers)
  # ==========================================================

  # Container 67: Prometheus
  prometheus:
    image: prom/prometheus:latest
    container_name: clisonix-prometheus
    ports:
      - "9090:9090"
    networks:
      - clisonix-network
    restart: unless-stopped

  # Container 68: Grafana
  grafana:
    image: grafana/grafana:latest
    container_name: clisonix-grafana
    environment:
      GF_SECURITY_ADMIN_PASSWORD: clisonix123
    ports:
      - "3001:3000"
    networks:
      - clisonix-network
    restart: unless-stopped

  # Container 69: Loki
  loki:
    image: grafana/loki:latest
    container_name: clisonix-loki
    ports:
      - "3100:3100"
    networks:
      - clisonix-network
    restart: unless-stopped

  # Container 70: Jaeger
  jaeger:
    image: jaegertracing/all-in-one:latest
    container_name: clisonix-jaeger
    ports:
      - "16686:16686"
      - "6831:6831/udp"
    networks:
      - clisonix-network
    restart: unless-stopped

  # Container 71: Tempo
  tempo:
    image: grafana/tempo:latest
    container_name: clisonix-tempo
    ports:
      - "3200:3200"
    networks:
      - clisonix-network
    restart: unless-stopped

  # ==========================================================
  # CATEGORY 12: COGNITIVE & ADDITIONAL (4 containers)
  # ==========================================================

  # Container 72: Agent Telemetry
  agent-telemetry:
    <<: *python-service
    container_name: clisonix-agent-telemetry
    ports:
      - "8009:8009"
    command: ["python", "stubs/agent_telemetry_stub.py", "8009"]

  # Container 73: Cognitive Engine
  cognitive-engine:
    <<: *python-service
    container_name: clisonix-cognitive-engine
    ports:
      - "8010:8010"
    command: ["python", "stubs/cognitive_stub.py", "8010"]

  # Container 74: Adaptive Router
  adaptive-router:
    <<: *python-service
    container_name: clisonix-adaptive-router
    ports:
      - "8011:8011"
    command: ["python", "stubs/router_stub.py", "8011"]
    depends_on:
      - cognitive-engine

  # Container 75: Health Monitor
  health-monitor:
    <<: *python-service
    container_name: clisonix-health-monitor
    ports:
      - "8099:8099"
    command: ["python", "stubs/health_monitor.py", "8099"]
    depends_on:
      - prometheus
